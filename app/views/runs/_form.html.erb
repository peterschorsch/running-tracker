<%= form_with(model: run, local: true, :url => { :action => action }, class: "form-horizontal", html: { autocomplete: "off" }) do |f| %>
  <%= render "templates/alerts/form-errors", model: run %>

  <div class="row">
    <div class="col-xs-3 col-xs-offset-2">
      <%= f.datetime_field :start_time, { class: 'form-control', :disabled => current_user.is_viewer? } %>
    </div>
    <div class="col-xs-2 col-xs-offset-1 col-sm-offset-2 text-right">
      <%= f.label :personal_best, 'Personal Best?', { class: "pointer-cursor make-text-unselectable" } %>
      <%= f.check_box :personal_best, { :disabled => current_user.is_viewer? } %>
    </div>
    <div class="col-xs-2 text-right">
      <%= f.label :completed_run, 'Completed?', { class: "pointer-cursor make-text-unselectable" } %>
      <%= f.check_box :completed_run, { :disabled => current_user.is_viewer? } %>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-xs-5 col-sm-offset-1">
      <%= f.label :name, 'Name:' %>
      <%= f.text_field :name, { class: 'form-control', placeholder: "Easy Run", :disabled => current_user.is_viewer? } %>
    </div>
    
    <div class="col-xs-2">
      <%= f.label :run_type_id, 'Run Type:' %>
      <%= f.select(:run_type_id, RunType.select_run_type_id_name, { :include_blank => "Select a Run Type" }, { :class => "form-control", :disabled => current_user.is_viewer? })%>
    </div>
    <div class="col-xs-3">
      <%= f.label :shoe_id, 'Shoes:' %>
      <%= f.select(:shoe_id, Shoe.of_user(current_user).select_shoe_id_name, {}, { :class => "form-control", :disabled => current_user.is_viewer? })%>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-xs-2 col-sm-offset-1">
      <%= f.label :planned_mileage, 'Planned Mileage:' %>
      <%= f.number_field :planned_mileage, { class: 'form-control', step: 0.1, :disabled => current_user.is_viewer? } %>
    </div>
    <div class="col-xs-2">
      <%= f.label :mileage_total, 'Actual Mileage:' %>
      <%= f.number_field :mileage_total, { class: 'form-control', step: 0.1, :disabled => current_user.is_viewer? } %>
    </div>
    <div class="col-xs-1">
      <%= f.label :pace, 'Pace:' %>
      <%= f.text_field :pace, { class: 'form-control', placeholder: "8:00", :disabled => current_user.is_viewer? } %>
    </div>
    <div class="col-xs-3">
      <div class="col-md-12"><%= f.label :hours, 'Elapsed Time:' %></div>
      <div class="col-md-4 mb-3">
        <%= number_field_tag 'hours', '', class: 'form-control', placeholder: "h", disabled: current_user.is_viewer? %>
      </div>
      <div class="col-md-4 mb-3">
        <%= number_field_tag 'minutes', '', class: 'form-control', placeholder: "m", disabled: current_user.is_viewer? %>
      </div>
      <div class="col-md-4 mb-3">
        <%= number_field_tag 'seconds', '', class: 'form-control', placeholder: "s", disabled: current_user.is_viewer? %>
      </div>
      <% if not @run.new_record? %>
        <p class="text-center">Current Time: <strong><%= concat_elapsed_time(@run.time_in_seconds) %></strong></p>
      <% end %>
    </div>
    <div class="col-xs-2">
      <%= f.label :elevation_gain, 'Elevation:' %>
      <%= f.number_field :elevation_gain, { class: 'form-control', placeholder: "100", :disabled => current_user.is_viewer? } %>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-xs-2 col-sm-offset-1">
      <%= f.label :city, 'City:' %>
      <%= f.text_field :city, { class: 'form-control', :disabled => current_user.is_viewer? } %>
    </div>
    <div class="col-xs-2">
      <%= f.label :state_id, 'State:' %>
      <%= f.select(:state_id, State.select_state_id_name, { :include_blank => "Select a State" }, { :class => "form-control", :disabled => current_user.is_viewer? })%>
    </div>
    <div class="col-xs-6">
      <%= f.label :notes, 'Notes:' %>
      <%= f.text_area :notes, { class: 'form-control', rows: 6, :disabled => current_user.is_viewer? } %>
    </div>
  </div>
  <br /><br />
  <div class="row">
    <div class="col-md-4 col-md-offset-4">
      <%= f.submit "Save Changes", class: "btn btn-success btn-block", :disabled => current_user.is_viewer? %>
    </div>
  </div>
<% end %>